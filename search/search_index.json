{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"aviato-client","text":"<p>A Python client library for Aviato sandboxes.</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>git clone https://github.com/coreweave/aviato-client.git\ncd aviato-client\nuv venv\nsource .venv/bin/activate\nuv pip install -e .\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>from aviato import Sandbox\n\n# Create and start a sandbox\nsandbox = await Sandbox.create(\n    \"sleep\", \"infinity\",\n    container_image=\"python:3.11\",\n)\n\n# Execute commands\nresult = await sandbox.exec([\"python\", \"-c\", \"print(2 + 2)\"])\nprint(result.stdout)  # 4\n\n# Clean up\nawait sandbox.stop()\n</code></pre> <p>Or use a context manager for automatic cleanup:</p> <pre><code>from aviato import Sandbox\n\nasync with Sandbox(\n    command=\"sleep\",\n    args=[\"infinity\"],\n    container_image=\"python:3.11\",\n) as sandbox:\n    result = await sandbox.exec([\"python\", \"-c\", \"print(2 + 2)\"])\n    print(result.stdout)\n</code></pre>"},{"location":"#configuration","title":"Configuration","text":""},{"location":"#environment-variables","title":"Environment Variables","text":"<p>The SDK supports two authentication strategies. Aviato credentials take priority if both are configured.</p>"},{"location":"#aviato-authentication","title":"Aviato Authentication","text":"<ul> <li><code>AVIATO_API_KEY</code> - API key for Aviato authentication</li> <li><code>AVIATO_BASE_URL</code> - Aviato API URL (default: <code>https://atc.cwaviato.com</code>)</li> </ul>"},{"location":"#weights-biases-authentication","title":"Weights &amp; Biases Authentication","text":"<ul> <li><code>WANDB_API_KEY</code> - W&amp;B API key (or use <code>~/.netrc</code> with <code>api.wandb.ai</code>)</li> <li><code>WANDB_ENTITY_NAME</code> - W&amp;B entity/team name (required for W&amp;B auth)</li> <li><code>WANDB_PROJECT_NAME</code> - W&amp;B project name (default: <code>uncategorized</code>)</li> </ul>"},{"location":"api/","title":"API Reference","text":""},{"location":"api/#aviato","title":"aviato","text":"<p>A Python client library for Aviato sandboxes.</p>"},{"location":"api/#aviato.WandbAuthError","title":"WandbAuthError","text":"<p>Raised when W&amp;B authentication is misconfigured.</p>"},{"location":"api/#aviato.SandboxDefaults","title":"SandboxDefaults  <code>dataclass</code>","text":"<pre><code>SandboxDefaults(container_image: str = DEFAULT_CONTAINER_IMAGE, command: str = DEFAULT_COMMAND, args: tuple[str, ...] = DEFAULT_ARGS, base_url: str = DEFAULT_BASE_URL, request_timeout_seconds: float = DEFAULT_REQUEST_TIMEOUT_SECONDS, max_lifetime_seconds: float | None = DEFAULT_MAX_LIFETIME_SECONDS, temp_dir: str = DEFAULT_TEMP_DIR, tags: tuple[str, ...] = tuple(), runway_ids: tuple[str, ...] | None = None, tower_ids: tuple[str, ...] | None = None)\n</code></pre> <p>Immutable configuration defaults for sandbox creation.</p> <p>All fields have sensible defaults. Override only what you need.</p> <p>There are two separate timeout concepts: - request_timeout_seconds: How long to wait for API responses (client-side) - max_lifetime_seconds: How long the sandbox runs before auto-termination (server-side)   If not set, the backend controls the default lifetime.</p> <p>Tags enable filtering and organizing sandboxes. They are propagated to the backend and can be used to query sandboxes by tag.</p> Example <p>defaults = SandboxDefaults(     container_image=\"python:3.12\",     command=\"tail\",     args=(\"-f\", \"/dev/null\"),     request_timeout_seconds=60,     max_lifetime_seconds=3600,  # 1 hour sandbox lifetime     tags=(\"my-workload\", \"experiment-42\"), )</p>"},{"location":"api/#aviato.SandboxDefaults.merge_tags","title":"merge_tags","text":"<pre><code>merge_tags(additional: list[str] | None) -&gt; list[str]\n</code></pre> <p>Combine default tags with additional tags.</p> <p>Tags from both sources are included. Order is: defaults first, then additional tags appended.</p>"},{"location":"api/#aviato.SandboxDefaults.with_overrides","title":"with_overrides","text":"<pre><code>with_overrides(**kwargs: Any) -&gt; SandboxDefaults\n</code></pre> <p>Create new defaults with some values overridden.</p>"},{"location":"api/#aviato.Sandbox","title":"Sandbox","text":"<pre><code>Sandbox(*, command: str | None = None, args: list[str] | None = None, defaults: SandboxDefaults | None = None, container_image: str | None = None, tags: list[str] | None = None, base_url: str | None = None, request_timeout_seconds: float | None = None, max_lifetime_seconds: float | None = None, runway_ids: list[str] | None = None, tower_ids: list[str] | None = None, resources: dict[str, Any] | None = None, mounted_files: list[dict[str, Any]] | None = None, s3_mount: dict[str, Any] | None = None, ports: list[dict[str, Any]] | None = None, service: dict[str, Any] | None = None, max_timeout_seconds: int | None = None, _session: Session | None = None)\n</code></pre> <p>Aviato sandbox client.</p> <p>Supports two construction patterns:</p> <p>Constructor (with context manager): <pre><code>async with Sandbox(\n    command=\"sleep\",\n    args=[\"infinity\"],\n    container_image=\"python:3.11\",\n) as sandbox:\n    result = await sandbox.exec([\"echo\", \"hello\"])\n</code></pre></p> <p>Factory method (for quick one-liners): <pre><code>sandbox = await Sandbox.create(\"echo\", \"hello\", \"world\")\nawait sandbox.stop()\n</code></pre></p> <p>Initialize a sandbox (does not start it).</p> PARAMETER DESCRIPTION <code>command</code> <p>Optional command to run in the sandbox</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>args</code> <p>Optional arguments for the command</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>defaults</code> <p>Optional SandboxDefaults to apply</p> <p> TYPE: <code>SandboxDefaults | None</code> DEFAULT: <code>None</code> </p> <code>container_image</code> <p>Container image to use (default: python:3.11)</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>tags</code> <p>Optional tags for the sandbox</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>base_url</code> <p>Aviato API URL (default: AVIATO_BASE_URL env or localhost)</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_timeout_seconds</code> <p>Timeout for API requests (client-side, default: 300s)</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> <code>max_lifetime_seconds</code> <p>Max sandbox lifetime (server-side). If not set, the backend controls the default.</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> <code>runway_ids</code> <p>Optional list of runway IDs</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>tower_ids</code> <p>Optional list of tower IDs</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>resources</code> <p>Resource requests (CPU, memory, GPU)</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>mounted_files</code> <p>Files to mount into the sandbox</p> <p> TYPE: <code>list[dict[str, Any]] | None</code> DEFAULT: <code>None</code> </p> <code>s3_mount</code> <p>S3 bucket mount configuration</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>ports</code> <p>Port mappings for the sandbox</p> <p> TYPE: <code>list[dict[str, Any]] | None</code> DEFAULT: <code>None</code> </p> <code>service</code> <p>Service configuration for network access</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>max_timeout_seconds</code> <p>Maximum timeout for sandbox operations</p> <p> TYPE: <code>int | None</code> DEFAULT: <code>None</code> </p>"},{"location":"api/#aviato.Sandbox.sandbox_id","title":"sandbox_id  <code>property</code>","text":"<pre><code>sandbox_id: str | None\n</code></pre> <p>The unique sandbox ID, or None if not yet started.</p>"},{"location":"api/#aviato.Sandbox.returncode","title":"returncode  <code>property</code>","text":"<pre><code>returncode: int | None\n</code></pre> <p>Exit code if sandbox has completed, None if still running.</p> <p>Use wait() to block until the sandbox completes.</p>"},{"location":"api/#aviato.Sandbox.tower_id","title":"tower_id  <code>property</code>","text":"<pre><code>tower_id: str | None\n</code></pre> <p>Tower where sandbox is running, or None if not started.</p>"},{"location":"api/#aviato.Sandbox.runway_id","title":"runway_id  <code>property</code>","text":"<pre><code>runway_id: str | None\n</code></pre> <p>Runway where sandbox is running, or None if not started.</p>"},{"location":"api/#aviato.Sandbox.status","title":"status  <code>property</code>","text":"<pre><code>status: SandboxStatus | None\n</code></pre> <p>Last known status of the sandbox.</p> <p>This is the cached status from the most recent API interaction.</p> <p>Returns None only for sandboxes that haven't been started yet.</p> <p>Note: This value may be stale. Check status_updated_at for when it was last fetched. For guaranteed fresh status, use <code>await sandbox.get_status()</code> which always hits the API.</p>"},{"location":"api/#aviato.Sandbox.status_updated_at","title":"status_updated_at  <code>property</code>","text":"<pre><code>status_updated_at: datetime | None\n</code></pre> <p>Timestamp when status was last fetched from the API.</p> <p>Returns None only for sandboxes that haven't been started yet.</p>"},{"location":"api/#aviato.Sandbox.started_at","title":"started_at  <code>property</code>","text":"<pre><code>started_at: datetime | None\n</code></pre> <p>Timestamp when the sandbox was started.</p> <p>Populated after start() completes or when obtained via list()/from_id(). None only for sandboxes that haven't been started yet.</p>"},{"location":"api/#aviato.Sandbox.tower_group_id","title":"tower_group_id  <code>property</code>","text":"<pre><code>tower_group_id: str | None\n</code></pre> <p>Tower group ID where the sandbox is running.</p>"},{"location":"api/#aviato.Sandbox.create","title":"create  <code>async</code> <code>classmethod</code>","text":"<pre><code>create(*args: str, container_image: str | None = None, defaults: SandboxDefaults | None = None, request_timeout_seconds: float | None = None, max_lifetime_seconds: float | None = None, tags: list[str] | None = None, resources: dict[str, Any] | None = None, mounted_files: list[dict[str, Any]] | None = None, s3_mount: dict[str, Any] | None = None, ports: list[dict[str, Any]] | None = None, service: dict[str, Any] | None = None, max_timeout_seconds: int | None = None) -&gt; Sandbox\n</code></pre> <p>Factory method for quick sandbox creation with auto-start.</p> <p>The first positional arg is the command, remaining args are its arguments. The sandbox is started before returning.</p> PARAMETER DESCRIPTION <code>*args</code> <p>Command and arguments (e.g., \"echo\", \"hello\", \"world\")</p> <p> TYPE: <code>str</code> DEFAULT: <code>()</code> </p> <code>container_image</code> <p>Container image to use</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>defaults</code> <p>Optional SandboxDefaults to apply</p> <p> TYPE: <code>SandboxDefaults | None</code> DEFAULT: <code>None</code> </p> <code>request_timeout_seconds</code> <p>Timeout for API requests (client-side)</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> <code>max_lifetime_seconds</code> <p>Max sandbox lifetime (server-side)</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> <code>tags</code> <p>Optional tags for the sandbox</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>resources</code> <p>Resource requests (CPU, memory, GPU)</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>mounted_files</code> <p>Files to mount into the sandbox</p> <p> TYPE: <code>list[dict[str, Any]] | None</code> DEFAULT: <code>None</code> </p> <code>s3_mount</code> <p>S3 bucket mount configuration</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>ports</code> <p>Port mappings for the sandbox</p> <p> TYPE: <code>list[dict[str, Any]] | None</code> DEFAULT: <code>None</code> </p> <code>service</code> <p>Service configuration for network access</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>max_timeout_seconds</code> <p>Maximum timeout for sandbox operations</p> <p> TYPE: <code>int | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Sandbox</code> <p>A started Sandbox instance</p> RAISES DESCRIPTION <code>ValueError</code> <p>If no positional arguments provided</p> <code>SandboxFailedError</code> <p>If sandbox fails to start</p> <code>SandboxTimeoutError</code> <p>If start times out</p> Example <pre><code>sandbox = await Sandbox.create(\"echo\", \"hello\")\nawait sandbox.stop()\n\n# With options\nsandbox = await Sandbox.create(\n    \"python\", \"train.py\",\n    container_image=\"pytorch/pytorch:latest\",\n    resources={\"cpu\": \"2\", \"memory\": \"4Gi\"},\n)\nawait sandbox.stop()\n</code></pre>"},{"location":"api/#aviato.Sandbox.session","title":"session  <code>classmethod</code>","text":"<pre><code>session(defaults: SandboxDefaults | None = None) -&gt; Session\n</code></pre> <p>Create a session for managing multiple sandboxes.</p> <p>Sessions provide: - Shared configuration via defaults - Automatic cleanup of orphaned sandboxes - Function execution via @session.function() decorator</p> PARAMETER DESCRIPTION <code>defaults</code> <p>Optional defaults to apply to sandboxes created via session</p> <p> TYPE: <code>SandboxDefaults | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Session</code> <p>A Session instance</p> Example <pre><code>session = Sandbox.session(defaults)\nsb = session.create(command=\"sleep\", args=[\"infinity\"])\n\n@session.function()\ndef compute(x, y):\n    return x + y\n\nawait session.close()\n</code></pre>"},{"location":"api/#aviato.Sandbox.list","title":"list  <code>async</code> <code>classmethod</code>","text":"<pre><code>list(*, tags: list[str] | None = None, status: str | None = None, runway_ids: list[str] | None = None, tower_ids: list[str] | None = None, base_url: str | None = None, timeout_seconds: float | None = None) -&gt; list[Sandbox]\n</code></pre> <p>List existing sandboxes with optional filters.</p> <p>Returns Sandbox instances that can be used for operations like exec(), stop(), get_status(), read_file(), write_file(), etc.</p> PARAMETER DESCRIPTION <code>tags</code> <p>Filter by tags (sandboxes must have ALL specified tags)</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>status</code> <p>Filter by status (\"running\", \"completed\", \"failed\", etc.)</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>runway_ids</code> <p>Filter by runway IDs</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>tower_ids</code> <p>Filter by tower IDs</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>base_url</code> <p>Override API URL (default: AVIATO_BASE_URL env or default)</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>timeout_seconds</code> <p>Request timeout (default: 300s)</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>list[Sandbox]</code> <p>List of Sandbox instances for matching sandboxes</p> Example <pre><code>sandboxes = await Sandbox.list(tags=[\"my-batch-job\"])\nfor sb in sandboxes:\n    print(f\"{sb.sandbox_id}: {sb.status}\")\n    await sb.stop()\n</code></pre>"},{"location":"api/#aviato.Sandbox.from_id","title":"from_id  <code>async</code> <code>classmethod</code>","text":"<pre><code>from_id(sandbox_id: str, *, base_url: str | None = None, timeout_seconds: float | None = None) -&gt; Sandbox\n</code></pre> <p>Attach to an existing sandbox by ID.</p> <p>Creates a Sandbox instance connected to an existing sandbox, allowing operations like exec(), stop(), get_status(), etc.</p> PARAMETER DESCRIPTION <code>sandbox_id</code> <p>The ID of the existing sandbox</p> <p> TYPE: <code>str</code> </p> <code>base_url</code> <p>Override API URL (default: AVIATO_BASE_URL env or default)</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>timeout_seconds</code> <p>Request timeout (default: 300s)</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Sandbox</code> <p>A Sandbox instance attached to the existing sandbox</p> RAISES DESCRIPTION <code>SandboxNotFoundError</code> <p>If sandbox doesn't exist</p> Example <pre><code>sb = await Sandbox.from_id(\"sandbox-abc123\")\nresult = await sb.exec([\"python\", \"-c\", \"print('hello')\"])\nawait sb.stop()\n</code></pre>"},{"location":"api/#aviato.Sandbox.delete","title":"delete  <code>async</code> <code>classmethod</code>","text":"<pre><code>delete(sandbox_id: str, *, base_url: str | None = None, timeout_seconds: float | None = None, missing_ok: bool = False) -&gt; bool\n</code></pre> <p>Delete a sandbox by ID without creating a Sandbox instance.</p> <p>This is a convenience method for cleanup scenarios where you don't need to perform other operations on the sandbox.</p> PARAMETER DESCRIPTION <code>sandbox_id</code> <p>The sandbox ID to delete</p> <p> TYPE: <code>str</code> </p> <code>base_url</code> <p>Override API URL (default: AVIATO_BASE_URL env or default)</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>timeout_seconds</code> <p>Request timeout (default: 300s)</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> <code>missing_ok</code> <p>If True, return False instead of raising when sandbox doesn't exist</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>bool</code> <p>True if sandbox was deleted successfully, False if missing_ok=True and not found</p> RAISES DESCRIPTION <code>SandboxNotFoundError</code> <p>If sandbox doesn't exist and missing_ok=False</p> <code>SandboxError</code> <p>If deletion failed for other reasons</p> Example <pre><code>await Sandbox.delete(\"sandbox-abc123\")\nawait Sandbox.delete(\"sandbox-abc123\", missing_ok=True)\n</code></pre>"},{"location":"api/#aviato.Sandbox.get_status","title":"get_status  <code>async</code>","text":"<pre><code>get_status() -&gt; SandboxStatus\n</code></pre> <p>Get the current status of the sandbox from the backend.</p> RETURNS DESCRIPTION <code>SandboxStatus</code> <p>SandboxStatus enum value</p> RAISES DESCRIPTION <code>SandboxNotRunningError</code> <p>If sandbox has not been started</p> Example <pre><code>sandbox = await Sandbox.create(\"sleep\", \"10\")\nstatus = await sandbox.get_status()  # SandboxStatus.RUNNING\nawait sandbox.wait()\nstatus = await sandbox.get_status()  # SandboxStatus.COMPLETED\n</code></pre>"},{"location":"api/#aviato.Sandbox.start","title":"start  <code>async</code>","text":"<pre><code>start(*, timeout_seconds: float | None = None) -&gt; str\n</code></pre> <p>Start the sandbox and wait for it to be ready.</p> RETURNS DESCRIPTION <code>str</code> <p>The sandbox ID</p> RAISES DESCRIPTION <code>SandboxFailedError</code> <p>If sandbox fails to start</p> <code>SandboxTimeoutError</code> <p>If start operation times out</p> Example <pre><code>sandbox = Sandbox(command=\"sleep\", args=[\"infinity\"])\nsandbox_id = await sandbox.start()\nprint(f\"Started: {sandbox_id}, tower: {sandbox.tower_id}\")\n</code></pre>"},{"location":"api/#aviato.Sandbox.wait","title":"wait  <code>async</code>","text":"<pre><code>wait(*, raise_on_termination: bool = True, timeout_seconds: float | None = None) -&gt; None\n</code></pre> <p>Wait for the sandbox to complete.</p> <p>Blocks until the sandbox process exits. After this returns successfully, returncode will be available.</p> PARAMETER DESCRIPTION <code>raise_on_termination</code> <p>If True (default), raises SandboxTerminatedError if sandbox was terminated externally. Set to False to handle termination gracefully without exceptions.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> <code>timeout_seconds</code> <p>Optional timeout for the wait operation.</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> RAISES DESCRIPTION <code>SandboxTimeoutError</code> <p>If the sandbox or wait operation times out</p> <code>SandboxTerminatedError</code> <p>If sandbox was terminated (and raise_on_termination=True)</p> <code>SandboxFailedError</code> <p>If sandbox failed</p> Example <pre><code>sandbox = await Sandbox.create(\"python\", \"-c\", \"print('done')\")\nawait sandbox.wait()\nprint(f\"Exit code: {sandbox.returncode}\")\n</code></pre>"},{"location":"api/#aviato.Sandbox.stop","title":"stop  <code>async</code>","text":"<pre><code>stop(*, snapshot_on_stop: bool = False, graceful_shutdown_seconds: float = DEFAULT_GRACEFUL_SHUTDOWN_SECONDS) -&gt; bool\n</code></pre> <p>Stop the sandbox and close the client.</p> <p>The sandbox is deregistered from its session regardless of whether the stop was successful, since the sandbox is no longer usable.</p> RETURNS DESCRIPTION <code>bool</code> <p>True if the backend confirmed the stop (or sandbox was already</p> <code>bool</code> <p>stopped), False if the stop failed.</p>"},{"location":"api/#aviato.Sandbox.exec","title":"exec  <code>async</code>","text":"<pre><code>exec(command: list[str], *, check: bool = False, timeout_seconds: float | None = None) -&gt; ExecResult\n</code></pre> <p>Execute a command in the running sandbox.</p> PARAMETER DESCRIPTION <code>command</code> <p>Command and arguments to execute</p> <p> TYPE: <code>list[str]</code> </p> <code>check</code> <p>If True, raise SandboxExecutionError on non-zero returncode</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>timeout_seconds</code> <p>Timeout for the command execution</p> <p> TYPE: <code>float | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>ExecResult</code> <p>ExecResult with stdout, stderr, and returncode</p> RAISES DESCRIPTION <code>SandboxNotRunningError</code> <p>If sandbox is not running</p> <code>SandboxExecutionError</code> <p>If check=True and command returns non-zero</p> <code>SandboxTimeoutError</code> <p>If command exceeds timeout_seconds</p> <code>ConnectError</code> <p>If an unexpected error occurs</p>"},{"location":"api/#aviato.Sandbox.read_file","title":"read_file  <code>async</code>","text":"<pre><code>read_file(filepath: str, *, timeout_seconds: float | None = None) -&gt; bytes\n</code></pre> <p>Read a file from the sandbox filesystem.</p> RAISES DESCRIPTION <code>SandboxNotRunningError</code> <p>If sandbox is not running</p> <code>TimeoutError</code> <p>If operation exceeds timeout_seconds</p>"},{"location":"api/#aviato.Sandbox.write_file","title":"write_file  <code>async</code>","text":"<pre><code>write_file(filepath: str, contents: bytes, *, timeout_seconds: float | None = None) -&gt; None\n</code></pre> <p>Write a file to the sandbox filesystem.</p> RAISES DESCRIPTION <code>SandboxNotRunningError</code> <p>If sandbox is not running</p> <code>SandboxFileError</code> <p>If the file could not be written</p> <code>TimeoutError</code> <p>If operation exceeds timeout_seconds</p>"},{"location":"api/#aviato.SandboxStatus","title":"SandboxStatus","text":"<p>Sandbox status values.</p>"},{"location":"api/#aviato.SandboxStatus.from_proto","title":"from_proto  <code>classmethod</code>","text":"<pre><code>from_proto(proto_status: int) -&gt; SandboxStatus\n</code></pre> <p>Convert protobuf status enum to SandboxStatus</p>"},{"location":"api/#aviato.SandboxStatus.to_proto","title":"to_proto","text":"<pre><code>to_proto() -&gt; int\n</code></pre> <p>Convert SandboxStatus to protobuf enum</p>"},{"location":"api/#aviato.Session","title":"Session","text":"<pre><code>Session(defaults: SandboxDefaults | None = None)\n</code></pre> <p>Manages sandbox lifecycle and provides function execution.</p> <p>Use a session when: - Creating multiple sandboxes with shared configuration - Executing Python functions in sandboxes - You want automatic cleanup of orphaned sandboxes</p> Example <pre><code>defaults = SandboxDefaults(container_image=\"python:3.11\")\n\nasync with Session(defaults) as session:\n    sb = session.create(command=\"sleep\", args=[\"infinity\"])\n    async with sb:\n        await sb.exec([\"echo\", \"hello\"])\n\n    @session.function()\n    def compute(x: int, y: int) -&gt; int:\n        return x + y\n\n    result = await compute(2, 3)  # 5\n</code></pre>"},{"location":"api/#aviato.Session.sandbox_count","title":"sandbox_count  <code>property</code>","text":"<pre><code>sandbox_count: int\n</code></pre> <p>Number of sandboxes currently tracked by this session.</p>"},{"location":"api/#aviato.Session.close","title":"close  <code>async</code>","text":"<pre><code>close() -&gt; None\n</code></pre> <p>Stop all managed sandboxes concurrently.</p> RAISES DESCRIPTION <code>SandboxError</code> <p>If one or more running sandboxes failed to stop.</p>"},{"location":"api/#aviato.Session.create","title":"create","text":"<pre><code>create(*, command: str | None = None, args: list[str] | None = None, container_image: str | None = None, tags: list[str] | None = None, resources: dict[str, Any] | None = None, mounted_files: list[dict[str, Any]] | None = None, s3_mount: dict[str, Any] | None = None, ports: list[dict[str, Any]] | None = None, service: dict[str, Any] | None = None, max_timeout_seconds: int | None = None) -&gt; Sandbox\n</code></pre> <p>Create a sandbox with session defaults applied.</p> RAISES DESCRIPTION <code>SandboxError</code> <p>If the session has been closed.</p>"},{"location":"api/#aviato.Session.list","title":"list  <code>async</code>","text":"<pre><code>list(*, tags: list[str] | None = None, status: str | None = None, runway_ids: list[str] | None = None, tower_ids: list[str] | None = None, adopt: bool = False) -&gt; list[Sandbox]\n</code></pre> <p>List sandboxes, optionally adopting them into this session.</p> <p>Automatically includes the session's default tags in the filter. This makes it easy to find sandboxes created by this session or a previous run with the same defaults.</p> PARAMETER DESCRIPTION <code>tags</code> <p>Additional tags to filter by (merged with session's default tags)</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>status</code> <p>Filter by status</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>runway_ids</code> <p>Filter by runway IDs (defaults to session's runway_ids if set)</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>tower_ids</code> <p>Filter by tower IDs (defaults to session's tower_ids if set)</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>adopt</code> <p>If True, register discovered sandboxes with this session    so they are stopped when the session closes</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>list[Sandbox]</code> <p>List of Sandbox instances</p> Example <pre><code>defaults = SandboxDefaults(tags=(\"my-app\", \"run-123\"))\nasync with Session(defaults) as session:\n    orphans = await session.list(adopt=True)\n    running = await session.list(status=\"running\")\n</code></pre>"},{"location":"api/#aviato.Session.from_id","title":"from_id  <code>async</code>","text":"<pre><code>from_id(sandbox_id: str, *, adopt: bool = True) -&gt; Sandbox\n</code></pre> <p>Attach to an existing sandbox, optionally adopting it into this session.</p> PARAMETER DESCRIPTION <code>sandbox_id</code> <p>The ID of the existing sandbox</p> <p> TYPE: <code>str</code> </p> <code>adopt</code> <p>If True (default), register the sandbox with this session</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>Sandbox</code> <p>A Sandbox instance attached to the existing sandbox</p> Example <pre><code>async with Session(defaults) as session:\n    sb = await session.from_id(\"sandbox-abc123\")\n    await sb.exec([\"echo\", \"hello\"])\n</code></pre>"},{"location":"api/#aviato.Session.adopt","title":"adopt","text":"<pre><code>adopt(sandbox: Sandbox) -&gt; None\n</code></pre> <p>Adopt an existing Sandbox instance into this session for cleanup tracking.</p> <p>Use this when you have a Sandbox from Sandbox.list() or Sandbox.from_id() that you want to be automatically stopped when the session closes.</p> PARAMETER DESCRIPTION <code>sandbox</code> <p>A Sandbox instance to track</p> <p> TYPE: <code>Sandbox</code> </p> RAISES DESCRIPTION <code>SandboxError</code> <p>If the session is closed</p> <code>ValueError</code> <p>If the sandbox has no sandbox_id</p> Example <pre><code>async with Session(defaults) as session:\n    sandboxes = await Sandbox.list(tags=[\"my-job\"])\n    for sb in sandboxes:\n        session.adopt(sb)\n</code></pre>"},{"location":"api/#aviato.Session.function","title":"function","text":"<pre><code>function(*, container_image: str | None = None, serialization: Serialization = JSON, temp_dir: str | None = None, resources: dict[str, Any] | None = None, mounted_files: list[dict[str, Any]] | None = None, s3_mount: dict[str, Any] | None = None, ports: list[dict[str, Any]] | None = None, service: dict[str, Any] | None = None, max_timeout_seconds: int | None = None) -&gt; Callable[[Callable[P, R]], Callable[P, Awaitable[R]]]\n</code></pre> <p>Decorator to execute a Python function in a sandbox.</p> <p>Each function call creates an ephemeral sandbox, executes the function, and returns the result. The sandbox is automatically cleaned up.</p> <p>The decorated function must be synchronous. Async functions are not supported.</p> PARAMETER DESCRIPTION <code>container_image</code> <p>Override session's default image for this function</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>serialization</code> <p>How to serialize arguments and return values. Defaults to JSON for safety. Use PICKLE for complex types, but only in trusted environments.</p> <p> TYPE: <code>Serialization</code> DEFAULT: <code>JSON</code> </p> <code>temp_dir</code> <p>Override temp directory for payload/result files in sandbox. Defaults to session default. Created if missing.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>resources</code> <p>Resource requests (CPU, memory, GPU)</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>mounted_files</code> <p>Files to mount into the sandbox</p> <p> TYPE: <code>list[dict[str, Any]] | None</code> DEFAULT: <code>None</code> </p> <code>s3_mount</code> <p>S3 bucket mount configuration</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>ports</code> <p>Port mappings for the sandbox</p> <p> TYPE: <code>list[dict[str, Any]] | None</code> DEFAULT: <code>None</code> </p> <code>service</code> <p>Service configuration for network access</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>max_timeout_seconds</code> <p>Maximum timeout for sandbox operations</p> <p> TYPE: <code>int | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Callable[[Callable[P, R]], Callable[P, Awaitable[R]]]</code> <p>A decorator that wraps a function for async execution in a sandbox</p> Example <pre><code>async with Session(defaults) as session:\n    @session.function()\n    def compute(x: int, y: int) -&gt; int:\n        return x + y\n\n    result = await compute(2, 3)  # 5\n</code></pre>"},{"location":"api/#aviato.ExecResult","title":"ExecResult  <code>dataclass</code>","text":"<pre><code>ExecResult(stdout_bytes: bytes, stderr_bytes: bytes, returncode: int, command: list[str] = list())\n</code></pre> <p>Result from a completed sandbox exec operation.</p> ATTRIBUTE DESCRIPTION <code>stdout_bytes</code> <p>Raw stdout bytes from the command</p> <p> TYPE: <code>bytes</code> </p> <code>stderr_bytes</code> <p>Raw stderr bytes from the command</p> <p> TYPE: <code>bytes</code> </p> <code>returncode</code> <p>Exit code from the command</p> <p> TYPE: <code>int</code> </p> <code>command</code> <p>The command that was executed (for debugging)</p> <p> TYPE: <code>list[str]</code> </p> Properties <p>stdout: Lazily decoded stdout as UTF-8 string stderr: Lazily decoded stderr as UTF-8 string</p>"},{"location":"api/#aviato.ExecResult.stdout","title":"stdout  <code>cached</code> <code>property</code>","text":"<pre><code>stdout: str\n</code></pre> <p>Decode stdout as UTF-8 (lazy, cached).</p>"},{"location":"api/#aviato.ExecResult.stderr","title":"stderr  <code>cached</code> <code>property</code>","text":"<pre><code>stderr: str\n</code></pre> <p>Decode stderr as UTF-8 (lazy, cached).</p>"},{"location":"api/#aviato.Serialization","title":"Serialization","text":"<p>Serialization modes for sandbox function execution.</p>"},{"location":"api/#aviato.AsyncFunctionError","title":"AsyncFunctionError","text":"<p>Raised when an async function is passed to @session.function().</p> <p>Async functions are not supported because the sandbox executes Python synchronously. The decorated function must be a regular (sync) function.</p>"},{"location":"api/#aviato.AviatoAuthenticationError","title":"AviatoAuthenticationError","text":"<p>Raised when authentication fails.</p>"},{"location":"api/#aviato.AviatoError","title":"AviatoError","text":"<p>Base exception for all Aviato operations.</p>"},{"location":"api/#aviato.FunctionError","title":"FunctionError","text":"<p>Base exception for function execution operations.</p>"},{"location":"api/#aviato.FunctionSerializationError","title":"FunctionSerializationError","text":"<p>Raised when arguments, referenced globals, or closures cannot be serialized.</p>"},{"location":"api/#aviato.SandboxError","title":"SandboxError","text":"<p>Base exception for sandbox operations.</p>"},{"location":"api/#aviato.SandboxExecutionError","title":"SandboxExecutionError","text":"<pre><code>SandboxExecutionError(message: str, *, exec_result: ExecResult | None = None, exception_type: str | None = None, exception_message: str | None = None)\n</code></pre> <p>Raised when command execution fails inside a sandbox.</p> <p>Access execution details via exec_result</p>"},{"location":"api/#aviato.SandboxFailedError","title":"SandboxFailedError","text":"<p>Raised when a sandbox fails to start or encounters a fatal error.</p>"},{"location":"api/#aviato.SandboxFileError","title":"SandboxFileError","text":"<pre><code>SandboxFileError(message: str, *, filepath: str | None = None)\n</code></pre> <p>Raised when a file operation fails in the sandbox.</p> <p>This is a sandbox infrastructure error, not a user code error. Inherits from SandboxError since it's a sandbox operation failure.</p>"},{"location":"api/#aviato.SandboxNotFoundError","title":"SandboxNotFoundError","text":"<pre><code>SandboxNotFoundError(message: str, *, sandbox_id: str | None = None)\n</code></pre> <p>Raised when a sandbox is not found (e.g., already deleted).</p>"},{"location":"api/#aviato.SandboxNotRunningError","title":"SandboxNotRunningError","text":"<p>Raised when an operation requires a running sandbox.</p>"},{"location":"api/#aviato.SandboxTerminatedError","title":"SandboxTerminatedError","text":"<p>Raised when a sandbox was terminated externally.</p>"},{"location":"api/#aviato.SandboxTimeoutError","title":"SandboxTimeoutError","text":"<p>Raised when a sandbox operation times out.</p>"},{"location":"examples/advanced-lifecycle-management/","title":"Advanced Lifecycle Management","text":"<p>For most use cases, the context manager or session patterns handle cleanup automatically. Use these APIs when you need explicit control over sandbox lifecycle.</p>"},{"location":"examples/advanced-lifecycle-management/#listing-sandboxes","title":"Listing Sandboxes","text":"<pre><code>from aviato import Sandbox\n\nsandboxes = await Sandbox.list()\nrunning = await Sandbox.list(status=\"running\")\ntagged = await Sandbox.list(tags=[\"my-app\"])\n\nfor sb in sandboxes:\n    print(f\"{sb.sandbox_id}: {sb.status}\")\n</code></pre>"},{"location":"examples/advanced-lifecycle-management/#reconnecting","title":"Reconnecting","text":"<pre><code>from aviato import Sandbox\n\nsandbox = await Sandbox.from_id(\"sandbox-abc123\")\nresult = await sandbox.exec([\"hostname\"])\nprint(result.stdout)\n</code></pre>"},{"location":"examples/advanced-lifecycle-management/#deleting","title":"Deleting","text":"<pre><code>from aviato import Sandbox\n\n# By instance\nsandbox = await Sandbox.create(\"sleep\", \"infinity\")\nawait sandbox.stop()\n\n# By ID\nawait Sandbox.delete(\"sandbox-abc123\")\n</code></pre>"},{"location":"examples/advanced-lifecycle-management/#adopting-orphaned-sandboxes","title":"Adopting Orphaned Sandboxes","text":"<p>Sessions can adopt sandboxes created elsewhere (e.g., from a crashed process) and clean them up automatically when the session exits.</p> <pre><code>from aviato import Sandbox, SandboxDefaults, Session\n\n# Create session with defaults - session.list() uses these tags automatically\ndefaults = SandboxDefaults(tags=(\"my-app\",))\n\nasync with Session(defaults) as session:\n    # Find and adopt orphaned sandboxes matching session's default tags\n    orphans = await session.list(adopt=True)\n\n    for sb in orphans:\n        result = await sb.exec([\"echo\", \"recovered\"])\n        print(result.stdout)\n\n# All adopted sandboxes stopped when session exits\n</code></pre>"},{"location":"examples/advanced-lifecycle-management/#manual-adoption","title":"Manual Adoption","text":"<pre><code>async with Session() as session:\n    # Adopt an existing sandbox instance\n    sandbox = await Sandbox.from_id(\"sandbox-abc123\")\n    session.adopt(sandbox)\n\n    # Or attach and adopt in one step\n    sandbox = await session.from_id(\"sandbox-xyz789\")\n\n    # Both will be stopped when session exits\n</code></pre>"},{"location":"examples/functions/","title":"Function Decorator","text":"<p>Execute Python functions in sandboxes with <code>@session.function()</code>:</p> <pre><code>from aviato import Sandbox, SandboxDefaults\n\ndefaults = SandboxDefaults(container_image=\"python:3.11\")\n\nasync with Sandbox.session(defaults) as session:\n    @session.function()\n    def add(x: int, y: int) -&gt; int:\n        return x + y\n\n    result = await add(2, 3)\n    print(result)  # 5\n</code></pre>"},{"location":"examples/functions/#pickle-serialization","title":"Pickle Serialization","text":"<p>Functions use JSON serialization by default. For complex types, use pickle:</p> <pre><code>from aviato import Sandbox, SandboxDefaults, Serialization\n\ndefaults = SandboxDefaults(container_image=\"python:3.11\")\n\nasync with Sandbox.session(defaults) as session:\n    @session.function(serialization=Serialization.PICKLE)\n    def process(items: list[dict]) -&gt; dict:\n        return {\"count\": len(items), \"first\": items[0]}\n\n    result = await process([{\"id\": 1}, {\"id\": 2}])\n    print(result)\n</code></pre>"},{"location":"examples/getting-started/","title":"Getting Started","text":""},{"location":"examples/getting-started/#prerequisites","title":"Prerequisites","text":"<pre><code>pip install aviato\nexport AVIATO_API_KEY=\"your-api-key\"\n</code></pre>"},{"location":"examples/getting-started/#example","title":"Example","text":"<pre><code>from aviato import Sandbox\n\n# Create and start a sandbox\nsandbox = await Sandbox.create(\n    \"sleep\", \"infinity\",\n    container_image=\"python:3.11\",\n)\n\n# Execute commands\nresult = await sandbox.exec([\"python\", \"-c\", \"print(2 + 2)\"])\nprint(result.stdout)  # 4\n\n# File operations\nawait sandbox.write_file(\"/tmp/data.txt\", b\"Hello, World!\\n\")\ncontent = await sandbox.read_file(\"/tmp/data.txt\")\nprint(content.decode())\n\n# Clean up\nawait sandbox.stop()\n</code></pre> <p>Or use a context manager for automatic cleanup:</p> <pre><code>from aviato import Sandbox\n\nasync with Sandbox(\n    command=\"sleep\",\n    args=[\"infinity\"],\n    container_image=\"python:3.11\",\n) as sandbox:\n    result = await sandbox.exec([\"python\", \"-c\", \"print(2 + 2)\"])\n    print(result.stdout)\n</code></pre>"},{"location":"examples/sessions/","title":"Sessions","text":"<p>Sessions manage multiple sandboxes with shared configuration and automatic cleanup.</p> <pre><code>import asyncio\nfrom aviato import Sandbox, SandboxDefaults\n\ndefaults = SandboxDefaults(\n    container_image=\"python:3.11\",\n    tags=(\"my-app\",),\n)\n\nasync with Sandbox.session(defaults) as session:\n    sb1 = session.create(command=\"sleep\", args=[\"infinity\"])\n    sb2 = session.create(command=\"sleep\", args=[\"infinity\"])\n\n    async with sb1, sb2:\n        r1, r2 = await asyncio.gather(\n            sb1.exec([\"python\", \"-c\", \"print('hello from sb1')\"]),\n            sb2.exec([\"python\", \"-c\", \"print('hello from sb2')\"]),\n        )\n        print(r1.stdout)\n        print(r2.stdout)\n\n# All sandboxes stopped when session exits\n</code></pre>"}]}